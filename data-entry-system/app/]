<script>
function create_input(form) {
   var inputs = {};

	$.each(form.serializeArray(), function(i, field) {
		if(field.name != 'entry[entry_type]' && 
			field.name != 'entry[json_blob]') {
			var name = field.name.replace('entry','');
			name = name.replace('[','');
			name = name.replace(']','');
			inputs[name] = field.value;
		}
	});

	console.log(inputs);
	alert(inputs.toString());
};
</script>


<%= form_for @entry do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :entry_type %>
    <%= f.select :entry_type, Entry::ENTRY_TYPES %>
  </p>
  <p>
    <%= f.label :json_blob %>
    <%= f.text_field :json_blob %>
  </p>
  <p>
    <%= f.label :title %>
  <input id="entry_title" name="entry[title]" size="30" type="text" />
  </p>           

  <p><%= f.submit :onclick => 'create_input($(this).closest("form"))' %></p>
<% end %>
